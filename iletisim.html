<!doctype html>
<html lang="tr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>İletişim</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <script
      src="https://code.jquery.com/jquery-3.7.0.min.js"
      integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g="
      crossorigin="anonymous"></script>
    <link rel="stylesheet" href="assets/css/styles.css">
  </head>
  <body data-bs-theme="dark">

    <div id="nav-holder">

    </div>

    <script>

        $(function(){
            $("#nav-holder").load("components/nav.html")
        })

    </script>

    <div class="container" id="first-item">

        <form id="contact-form" action="assets/php/contactController.php" method="post">
            <fieldset>
                <legend class="blue h5">İletişim :</legend>
                
                <div class="row">

                    <div class="mb-3 col-6">
                        <label for="name" class="form-label">Adınız</label>
                        <input type="text" class="form-control" id="name" name="name">
                    </div>
    
                    <div class="mb-3 col-6">
                        <label for="surname" class="form-label">Soyadınız</label>
                        <input type="text" class="form-control" id="surname" name="surname">
                    </div>

                </div>

                <div class="row">

                    <div class="mb-3 col-8">
                        <label for="email" class="form-label">E-postanız</label>
                        <input type="text" class="form-control" id="email" name="email">
                    </div>

                    <div class="mb-3 col-4">
                        <label for="genders">Cinsiyet</label>
                        <select class="mt-3" id="genders" name="genders">
                            <option value="Erkek">Erkek</option>
                            <option value="Kadın">Kadın</option>
                        </select>
                    </div>

                </div>

                <div class="row">
                    <div class="mb-3">
                        <label for="message" class="form-label">Mesajınız</label>
                        <textarea class="form-control" id="message" name="message" rows="8"></textarea>
                    </div>
                </div>
    
            </fieldset>

            <div class="d-flex">
              <button type="button" class="btn btn-primary me-2" onclick="makeChecksJavascript()">Gönder - I</button>
              <button type="button" class="btn btn-info me-2">Gönder - II</button>
              <input type="reset" class="btn btn-danger" onclick="clear()" value="Temizle">
            </div>

        </form>

    </div>

    <script>

      // Javascript ile form elemanlarının kontrolü

      function checkEmpty(name, surname, email, message){
        console.log(name.length);
        console.log(surname.length);
        console.log(email.length);
        console.log(message.length);

        return name.length == 0 || surname.length == 0 
          || email.length == 0 || message.length == 0
      }

      function checkStartDot(email){
        return email.charAt(0) == '.'
      }

      function checkEndDot(email){
        return email.charAt(-1) == '.'
      }

      function checkEmailSign(email){
        return email.includes("@")
      }

      function makeChecksJavascript(){
        const form = document.getElementById("contact-form")
        const name = document.getElementById("name").value
        const surname = document.getElementById("surname").value
        const email = document.getElementById("email").value
        const message = document.getElementById("message").value

        if (checkEmpty(name, surname, email, message)) {
          alert("Lütfen tüm form alanlarını doldurunuz.")
          return
        }
        if (checkStartDot(email)) {
          alert("E-posta nokta (.) ile başlayamaz.")
          return
        }
        if (checkEndDot(email)) {
          alert("E-posta nokta (.) ile bitemez.")
          return
        }
        if (checkEmailSign(email) == false) {
          alert("E-postanızın içerisinde @ işareti bulunmamaktadır.")
          return
        }

        // Yöntem 1
        form.submit()
      }

      function clear(){
        const form = document.getElementById("contact-form")
        form.reset()
      }

    </script>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

  </body>
</html>